<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Diary</title>
    <link rel="stylesheet" href="styles.css">
</head>

<style>
    body {
    font-family: Arial, sans-serif;
    background-color: #f7f7f7;
    margin: 0;
    padding: 0;
}

.container {
    width: 80%;
    margin: 30px auto;
    padding: 20px;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h1 {
    text-align: center;
}

form {
    margin-bottom: 20px;
}

form label {
    display: block;
    margin: 10px 0 5px;
}

form input, form textarea, form button {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

form button {
    background-color: #5cb85c;
    color: white;
    border: none;
    cursor: pointer;
}

form button:hover {
    background-color: #4cae4c;
}

#entries {
    margin-top: 20px;
}

.entry {
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
    margin-bottom: 10px;
}

.entry:last-child {
    border-bottom: none;
}

</style>

<body>
    <div class="container">
        <h1>ç®ç®å°è±¬æ—¥è¨˜</h1>
        <form id="diaryForm">
            <label for="diaryDate">æ—¥æœŸ:</label>
            <input type="date" id="diaryDate" name="diaryDate" required>
  
            <label for="diaryMood">å¿ƒæƒ…:</label>
            <input type="text" id="diaryMood" name="diaryMood" placeholder="ğŸ˜Š" required>

            <label for="diaryEntry">æ—¥è¨˜å…§å®¹:</label>
            <textarea id="diaryEntry" name="diaryEntry" rows="4" required></textarea>

            <button type="submit">æäº¤æ—¥è¨˜</button>
            <button id="clearButton">æ¸…ç©ºç´€éŒ„</button>

        </form>
        <div id="entries"></div>
    </div>

  <script>
        document.addEventListener('DOMContentLoaded', function() {
    // ç•¶æ–‡æª”åŠ è¼‰å®Œæˆå¾Œï¼ŒåŠ è¼‰ä¿å­˜çš„æ—¥è¨˜æ¢ç›®
    loadEntries();
});

document.getElementById('diaryForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // ç²å–ç”¨æˆ¶è¼¸å…¥
    var diaryDate = document.getElementById('diaryDate').value;
    var diaryMood = document.getElementById('diaryMood').value;
    var diaryEntry = document.getElementById('diaryEntry').value;

    // ä¿å­˜æ—¥è¨˜æ¢ç›®
    saveEntry(diaryDate, diaryMood, diaryEntry);

    // æ·»åŠ æ—¥è¨˜æ¢ç›®åˆ°é é¢
    addEntryToPage(diaryDate, diaryMood, diaryEntry);

    // æ¸…ç©ºè¡¨å–®
    document.getElementById('diaryForm').reset();
});

function saveEntry(date, mood, entry) {
    // ç²å–ç›®å‰æ‰€æœ‰çš„æ¢ç›®
    var entries = JSON.parse(localStorage.getItem('diaryEntries') || '[]');
    
    // æ·»åŠ æ–°çš„æ¢ç›®
    entries.push({ date, mood, entry });

    // ä¿å­˜æ›´æ–°å¾Œçš„æ¢ç›®å›localStorage
    localStorage.setItem('diaryEntries', JSON.stringify(entries));
}

function loadEntries() {
    var entries = JSON.parse(localStorage.getItem('diaryEntries') || '[]');

    // åŠ è¼‰æ¯ä¸€æ¢æ—¥è¨˜æ¢ç›®åˆ°é é¢
    entries.forEach(function(entry) {
        addEntryToPage(entry.date, entry.mood, entry.entry);
    });
}

function addEntryToPage(date, mood, entry) {
    var entryDiv = document.createElement('div');
    entryDiv.classList.add('entry');
    entryDiv.innerHTML = '<p><strong>æ—¥æœŸ:</strong> ' + date + '</p>' +
                         '<p><strong>å¿ƒæƒ…:</strong> ' + mood + '</p>' +
                         '<p><strong>å…§å®¹:</strong> ' + entry + '</p>';
    document.getElementById('entries').appendChild(entryDiv);
    function clearEntries() {
    // æ¸…é™¤é é¢ä¸Šçš„æ¢ç›®
    document.getElementById('entries').innerHTML = '';

    // æ¸…é™¤ localStorage ä¸­çš„æ¢ç›®
    localStorage.removeItem('diaryEntries');
}

// é€™å€‹å‡½æ•¸å¯ä»¥ç¶å®šåˆ°ä¸€å€‹æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶ä¸Š
document.getElementById('clearButton').addEventListener('click', clearEntries);
function clearEntries() {
    // ç¢ºèªå°è©±æ¡†
    var confirmClear = confirm("æ‚¨ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰æ—¥è¨˜è¨˜éŒ„å—ï¼Ÿé€™å€‹æ“ä½œä¸èƒ½æ’¤éŠ·ã€‚");

    // å¦‚æœç”¨æˆ¶ç¢ºèªæ¸…ç©º
    if (confirmClear) {
        // æ¸…é™¤é é¢ä¸Šçš„æ¢ç›®
        document.getElementById('entries').innerHTML = '';

        // æ¸…é™¤ localStorage ä¸­çš„æ¢ç›®
        localStorage.removeItem('diaryEntries');
    }
}

// å‡è¨­æ‚¨å·²ç¶“æœ‰äº†ä¸€å€‹idç‚º'clearButton'çš„æŒ‰éˆ•
document.getElementById('clearButton').addEventListener('click', clearEntries);

}


    </script>
</body>
</html>